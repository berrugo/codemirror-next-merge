<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: basic_setup.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: basic_setup.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {ViewPlugin} from '@codemirror/next/view';
import {acceptMarker, revertMarker, applyChunkGutter} from './apply_chunk.mjs';
import {ChangeSetField} from './changeset_field.mjs';
import {futureExtension, pastExtension} from './decorations.mjs';
import {foldGaps} from './fold_gaps.mjs';

function makeExtension(changeSetField, extension, options, future) {
  let foldMargin = options.foldMargin;
  return [
    extension,
    (future ? futureExtension : pastExtension)(changeSetField),
    applyChunkGutter(changeSetField, revertMarker),
    foldGaps(changeSetField, /*margin=*/foldMargin),
  ];
}

/**
 * Show a diff reverting the changes in the view.
 * @param {EditorView} pastView the view to revert to
 * @param {number} [options.foldMargin=3] clean lines of margin for folding
 * @returns {Extension}
 */
export function revertView(pastView, options = {}) {
  let {changeSetField, extension} = ChangeSetField.syncTargetExtension(pastView);
  return makeExtension(changeSetField, extension, options, /*future=*/false);
}

/**
 * Show a diff accepting the changes in the view.
 * @param {EditorView} futureView the view to accept
 * @param {number} [options.foldMargin=3] clean lines of margin for folding
 * @returns {Extension}
 */
export function acceptView(futureView, options = {}) {
  let {changeSetField, extension} = ChangeSetField.syncTargetExtension(futureView);
  return makeExtension(changeSetField, extension, options, /*future=*/true);
}

/**
 * Show a diff reverting the changes in the string.
 * @param {string} pastString the string to revert to
 * @param {number} [options.foldMargin=3] clean lines of margin for folding
 * @returns {Extension}
 */
export function revertString(pastString, options = {}) {
  let {changeSetField, extension} = ChangeSetField.withString(pastString);
  return makeExtension(changeSetField, extension, options, /*future=*/false);
}

/**
 * Show a diff accepting the changes in the string.
 * @param {string} futureString the string to accept
 * @param {number} [options.foldMargin=3] clean lines of margin for folding
 * @returns {Extension}
 */
export function acceptString(futureString, options = {}) {
  let {changeSetField, extension} = ChangeSetField.withString(futureString);
  return makeExtension(changeSetField, extension, options, /*future=*/true);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ChangeSetDecorations.html">ChangeSetDecorations</a></li><li><a href="ChangeSetField.html">ChangeSetField</a></li><li><a href="TemplateGutterMarker.html">TemplateGutterMarker</a></li></ul><h3>Global</h3><ul><li><a href="global.html#acceptMarker">acceptMarker</a></li><li><a href="global.html#acceptString">acceptString</a></li><li><a href="global.html#acceptView">acceptView</a></li><li><a href="global.html#applyChunkGutter">applyChunkGutter</a></li><li><a href="global.html#diffChars">diffChars</a></li><li><a href="global.html#diffDefault">diffDefault</a></li><li><a href="global.html#diffLines">diffLines</a></li><li><a href="global.html#diffSemantic">diffSemantic</a></li><li><a href="global.html#diffToChangeSet">diffToChangeSet</a></li><li><a href="global.html#diffWords">diffWords</a></li><li><a href="global.html#foldGaps">foldGaps</a></li><li><a href="global.html#futureExtension">futureExtension</a></li><li><a href="global.html#pastExtension">pastExtension</a></li><li><a href="global.html#revertMarker">revertMarker</a></li><li><a href="global.html#revertString">revertString</a></li><li><a href="global.html#revertView">revertView</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Fri Dec 11 2020 06:58:46 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
